From faa2a55d0565c4cb6c987ff524779a984d52b258 Mon Sep 17 00:00:00 2001
From: Joachim Zobel <jz-2017@heute-morgen.de>
Date: Sat, 24 Feb 2024 15:16:30 +0100
Subject: Patch to make a release suitable for Debian

---
 debian/compat                   |  1 -
 debian/source/format            |  2 +-
 debian/source/lintian-overrides |  4 ----
 etc/vzlogger.conf               | 23 +++++++++++++++++++++++
 4 files changed, 24 insertions(+), 6 deletions(-)
 delete mode 100644 debian/compat
 delete mode 100644 debian/source/lintian-overrides

diff --git a/debian/compat b/debian/compat
deleted file mode 100644
index 48082f7..0000000
--- a/debian/compat
+++ /dev/null
@@ -1 +0,0 @@
-12
diff --git a/debian/source/format b/debian/source/format
index 89ae9db..163aaf8 100644
--- a/debian/source/format
+++ b/debian/source/format
@@ -1 +1 @@
-3.0 (native)
+3.0 (quilt)
diff --git a/debian/source/lintian-overrides b/debian/source/lintian-overrides
deleted file mode 100644
index 8261c3d..0000000
--- a/debian/source/lintian-overrides
+++ /dev/null
@@ -1,4 +0,0 @@
-# May be odd, but I don't want to change the (non debian) past
-odd-historical-debian-changelog-version *0.3.4-rc1*
-# Having a debian watch file in the native package is easier to maintain
-debian-watch-file-in-native-package *
diff --git a/etc/vzlogger.conf b/etc/vzlogger.conf
index f30363e..48aa76b 100644
--- a/etc/vzlogger.conf
+++ b/etc/vzlogger.conf
@@ -29,9 +29,11 @@
 
     // realtime notification settings
     "push": [
+        /*
         {
             "url": "http://127.0.0.1:5582"  // notification destination, e.g. frontend push-server
         }
+        */
     ],
 
     // mqtt client support (if ENABLE_MQTT set at cmake generation)
@@ -153,6 +155,27 @@
                 "middleware": "http://localhost/middleware.php"
             }
         },
+        {
+            /* A minimal example that "just works" on Debian. 
+               The steps needed are:
+               1. Install influxdb: sudo apt install influxdb influxdb-client
+               2. Start the client by calling influx on the command line and
+               create db: CREATE DATABASE vzlogger
+             */
+            "enabled": false,               // disabled meters will be ignored
+            "allowskip": false,                  // errors when opening meter may be ignored if enabled
+
+            "protocol": "random",
+            "interval": 2,
+            "max": 40.0,                    // has to be double!
+            "min": -5.0,                    // has to be double!
+            "channel": {
+                "uuid": "25a53b28-75ec-4764-a8a6-68587722ddab",
+                // For details on the influxdb configuration see vzlogger.conf.InfluxDB
+                "api": "influxdb",          
+                "host": "localhost:8086" 
+            }
+        },
         {
             "enabled": false,               // disabled meters will be ignored
             "allowskip": false,                  // errors when opening meter may be ignored if enabled
-- 
2.39.2

